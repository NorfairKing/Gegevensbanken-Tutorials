\documentclass[transacties.tex]{subfiles}
\begin{document}

\chapter{Generisch}
\renewcommand\thesection{V\arabic{section}}
\renewcommand\thesubsection{V\arabic{section}}


\section{Is dit transactierooster herstelbaar?}
\subsection*{Opgave}
Gegeven een transactierooster $S$ van $n$ transacties $T_i$. Bepaal of $S$ herstelbaar is. (Als $S$ herstelbaar is, kijk dan na of het cascadeloos en strict is.)
\subsection*{Antwoord}
\begin{enumerate}
\item Bepaal voor elke variabele welke transacties ernaar schrijven.
\item Bepaal voor elke variabele welke transacties ervan lezen.
\item Check voor elke koppel $(T_1,T_2)$ transacties de noodzakelijke voorwaarde uit de definitie van herstelbaarheid.
\item Als alle checks slagen, is het transactierooster herstelbaar.
\end{enumerate}

\section{Is dit transactierooster conflict-serialiseerbaar?}
\subsection*{Opgave}
Gegeven een transactierooster $S$ van $n$ transacties $T_i$. Bepaal of $S$ conflict-serialiseerbaar is.
\subsection*{Antwoord}
We zullen een gerichte graaf opstellen aan de hand van $S$. Het rooster is conflict-serialiseerbaar als en slechts als deze graaf geen cycli bevat.
\begin{enumerate}
\item Maak een knoop $v_i$ voor elke transactie $T_i$.
\item Maak een book $e_{ij}$ voor elk van de volgende mogelijke gevallen.
\begin{itemize}
\item $T_i$ voert een \textbf{lees} operatie uit op $A$ \textbf{na} een \textbf{schrijf} operatie van $T_j$.
\item $T_i$ voert een \textbf{schrijf} operatie uit op $A$ \textbf{na} een \textbf{lees} operatie van $T_j$.
\item $T_i$ voert een \textbf{schrijf} operatie uit op $A$ \textbf{na} een \textbf{schrijf} operatie van $T_j$/
\end{itemize}
\end{enumerate}

% Examenvraag
\section{Bespreek dit transactierooster}
\subsection*{Opgave}
Bepaal of dit rooster herstelbaar, cascadeloos, strict, conflict-serialiseerbaar is. Geef eventueel een conflict-serialiseerbaar alternatief en geef een serieel equivalent.

\subsection*{Antwoord}
Gebruik bovenstaande vragen als handleiding om elk van de vragen individueel op te lossen. Herstelbaarheid, cascadeloosheid en strictheid kunnen eenvoudig overlopen worden aan de hand van de definities. Onthoud ook de eigenschap omtrent deze drie eigenschappen: elke eigenschap is altijd een speciaal geval van de vorige. Zodra \'e\'en van de testen faalt kan je dus al stoppen (als je in deze volgorde werkt).

Stel voor het testen van conflict-serializeerbaarheid zeker een precedence-graaf op. Test zeker ook eerst of het rooster serieel is want dan is het zeker conflict-serializeerbaar.

% TODO Examenvraag
\iffalse
\section{Timestamp ordering}
\subsection*{Opgave}
Gegeven een timestamp ordering algoritme.
\begin{itemize}
\item Leg uit wat $TS(T)$, $read\_TS(X)$ en $write\_TS(X)$ betekent.
\item Geef twee nadelen van standaard `Timestamp ordering'
\item Gegeven twee transacties, geef een mogelijk rooster met timestamp ordering.
\end{itemize}
\subsection*{Antwoord}
\fi

\end{document}
